name: Reset gh-pages

on: workflow_dispatch

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
    - name: debug
      uses: octokit/request-action@v2.x
      with:
        route: GET /repos/${{ github.repository }}/git/ref/heads/gh-pages
      env:
        GITHUB_TOKEN: ${{ secrets.PAT }}
    - name: debug
      uses: octokit/request-action@v2.x
      with:
        route: GET /repos/${{ github.repository }}/git/ref/tags/last_ci_run
      env:
        GITHUB_TOKEN: ${{ secrets.PAT }}

#    - name: delete tag last_ci_run
#      uses: octokit/request-action@v2.x
#      with:
#        route: DELETE /repos/${{ github.repository }}/git/refs/tags/last_ci_run
#      env:
#        GITHUB_TOKEN: ${{ secrets.PAT }}
    - name: reset gh-pages
      uses: octokit/request-action@v2.x
      with:
        route: POST /repos/${{ github.repository }}/git/refs/heads/gh-pages
        sha: '67cd99e400dc6e776e628c201299edae0734f2ff'
        force: true
      env:
        GITHUB_TOKEN: ${{ secrets.PAT }}

    - name: reset tag last_ci_run
      uses: octokit/request-action@v2.x
      with:
        route: POST /repos/${{ github.repository }}/git/refs/tags/last_ci_run
        sha: '389b803e1637dd9720ec93cf5d6ca8f8bd5eadf0'
        force: true
      env:
        GITHUB_TOKEN: ${{ secrets.PAT }}
#    - name: set tag last_ci_run
#      uses: octokit/request-action@v2.x
#      with:
#        route: POST /repos/${{ github.repository }}/git/refs
#        ref: refs/tags/last_ci_run
#        sha: '389b803e1637dd9720ec93cf5d6ca8f8bd5eadf0'
#      env:
#        GITHUB_TOKEN: ${{ secrets.PAT }}
